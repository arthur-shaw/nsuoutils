<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Outils pour l'enquête NSU de l'EHCVM • nsuoutils</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Outils pour l'enquête NSU de l'EHCVM">
<meta property="og:description" content="Fournit des fonctions pour mieux gérer les données et les images
    brutes issues de l'enquête sur les unités non-standard (NSU). 
    Pour les données, un mécanisme pour fusionner les bases. 
    Pour les images, une fonction pour classer les images selon le produit et unité captée. ">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">nsuoutils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/nsuoutils.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/arthur-shaw/nsuoutils/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="nsuoutils-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#nsuoutils-" class="anchor"></a>nsuoutils <img src="reference/figures/logo.png" align="right" height="139">
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>L’objectif du package est de fournir des outils pour deux tâches récurrantes de l’enquête sur les unités non-standard (NSU):</p>
<ol>
<li>Fusionner les bases</li>
<li>Classer les images</li>
</ol>
<p>L’enquête NSU produit un grand nombre de bases. Pour les NSU de consommation, les données sont captées dans 11 instruments: un par groupe de produits (e.g., céréales, viandes, etc.). Pour chaque instrument, des informations sont collectées pour plusiers produits. Pour chaque produit, des informations sont receuillies pour les unités connues (<code>unitesFixes</code>), les unités connues pour d’autres produits (<code>unitesautre1</code>), et les unités inconnues avant l’enquête (<code>unitesautre2</code>) ainsi que les relevés de taille et de prix pour chacun de ces types d’unités (<code>releve</code>, <code>autre1releve</code>, <code>autre2releve</code>). Autant dire qu’il y a des dizaines de bases par produit, et peut-être des centaines pour l’ensemble de l’enquête. Tout ceci doit être fusionné.</p>
<p>L’enquête NSU capte des images pour chaque produit-unité observé dans les marchés. Dans les fichiers exportés, les images classées par entretien. Cette stratégie d’organisation rend facile retrouver une image pour un entretien donné. Mais ce classement n’est pas commode pour d’autres tâches comme comparer la qualité des images au sein d’un groupe d’un produit-image donné et choisir la meilleure image pour la taille moyenne du produit-image. Tout ceci doit</p>
<p>Ce package fournit les outils pour accomplir ces deux tâches–la fusion des bases et le classement des images–de manière aussi simple pour l’utilisateur final que possible.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Ce package n’est pas encore disponible sur CRAN, mais peut être installé par la commande suivante:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># si {devtools} n'est pas installé, activer la commande ci-dessous afin de l'installer</span>
<span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"arthur-shaw/nsuoutils"</span><span class="op">)</span></code></pre></div>
</div>
<div id="emploi" class="section level2">
<h2 class="hasAnchor">
<a href="#emploi" class="anchor"></a>Emploi</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># enregistrer les répertoires clé</span>
<span class="co"># ces répertoires seront utilisés par les exemples qui suivent</span>
<span class="va">projet_dir</span> <span class="op">&lt;-</span> <span class="st">"C:/EHCVM/NSU/"</span>
<span class="va">donnees_entree_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">projet_dir</span>, <span class="st">"entree/"</span><span class="op">)</span>
<span class="va">donnees_sortie_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">projet_dir</span>, <span class="st">"sortie/"</span><span class="op">)</span>
<span class="va">images_entree_dir</span> <span class="op">&lt;-</span> <span class="va">donnees_entree_dir</span>
<span class="va">images_sortie_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">projet_dir</span>, <span class="st">"images/"</span><span class="op">)</span></code></pre></div>
<div id="fusionner-les-bases" class="section level3">
<h3 class="hasAnchor">
<a href="#fusionner-les-bases" class="anchor"></a>Fusionner les bases</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Fusionner en spécifiant:</span>
<span class="co"># - le répertoire parent où retrouver les sous-répertoires avec données</span>
<span class="co"># - le texte--une expression régulière--qui identifie les sous-répertoires avec données</span>
<span class="co"># - le répertoire où sauvegarder les bases fusionnées en format Stata</span>
<span class="fu"><a href="reference/combine_nsu_data.html">combine_nsu_data</a></span><span class="op">(</span>
    dir_in <span class="op">=</span> <span class="va">donnees_entree_dir</span>,
    dir_regexp <span class="op">=</span> <span class="st">"_STATA_"</span>,
    dir_out <span class="op">=</span> <span class="va">donnees_sortie_dir</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="classer-les-images" class="section level3">
<h3 class="hasAnchor">
<a href="#classer-les-images" class="anchor"></a>Classer les images</h3>
<p>Le classement des images suit le flux de travail suivant:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># D'abord, faire l'inventaire des produits-unités</span>
<span class="va">produits_unites</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/inventory_product_units.html">inventory_product_units</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="va">donnees_sortie_dir</span><span class="op">)</span>

<span class="co"># Ensuite, créer des répertoires pour chaque produit et produit-unité retrouvé</span>

<span class="fu"><a href="reference/create_image_dirs.html">create_image_dirs</a></span><span class="op">(</span>
    inventory_df <span class="op">=</span> <span class="va">produits_unites</span>, 
    dir <span class="op">=</span> <span class="va">donnees_sortie_dir</span>
<span class="op">)</span>

<span class="co"># Puis, copier les images vers les répertoires produit-unité</span>
<span class="fu"><a href="reference/sort_images.html">sort_images</a></span><span class="op">(</span>
    inventory_df <span class="op">=</span> <span class="va">produits_unites</span>,
    dir_in <span class="op">=</span> <span class="va">images_entree_dir</span>,
    image_dir_pattern <span class="op">=</span> <span class="st">"_Binary_"</span>,
    dir_out <span class="op">=</span> <span class="va">images_sortie_dir</span>    
<span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/arthur-shaw/nsuoutils/">https://​github.com/​arthur-shaw/​nsuoutils/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/arthur-shaw/nsuoutils/issues">https://​github.com/​arthur-shaw/​nsuoutils/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Arthur Shaw <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Arthur Shaw.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
